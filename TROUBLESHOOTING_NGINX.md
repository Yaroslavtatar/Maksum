# Сайт не открывается при Nginx «запущен»

Если Nginx показывает статус «запущен», но страница не грузится — в 99% случаев **на порту 3000 не запущено приложение** (или оно упало). Nginx сам по себе только пересылает запросы, он не отдаёт ваш фронт.

---

## 1. Проверить, слушает ли кто-то порт 3000

На сервере выполните:

```bash
# Linux
ss -tlnp | grep 3000
# или
netstat -tlnp | grep 3000
```

Если пусто — **на 3000 ничего не работает**. Nginx проксирует в пустоту → браузер видит ошибку (502 Bad Gateway или таймаут).

**Что делать:** запустить приложение.

```bash
cd /путь/к/VK\ SOSA
python3 run.py
```

Или вручную в двух терминалах:

```bash
# Терминал 1 — бэкенд
cd backend && python3 -m uvicorn server:app --host 127.0.0.1 --port 8001

# Терминал 2 — фронт (dev-сервер на 3000)
cd frontend && yarn start
# или: npm run start
```

После этого снова проверьте `ss -tlnp | grep 3000` — должен появиться процесс на 127.0.0.1:3000.

---

## 2. Каталог (root) Nginx не нужен

При такой конфигурации:

```nginx
location / {
    proxy_pass http://127.0.0.1:3000;
    ...
}
```

Nginx **не раздаёт файлы с диска** и не использует `root`/каталог. Все запросы уходят на приложение на порту 3000. Поэтому «каталог не установлен» или «ему похуй» — не причина: для этого режима каталог и не требуется.

---

## 3. Посмотреть логи Nginx

Если на 3000 вроде что-то есть, но сайт всё равно не открывается:

```bash
# Ошибки Nginx
sudo tail -50 /var/log/nginx/error.log

# Кто и что запрашивал
sudo tail -50 /var/log/nginx/access.log
```

Типично при неработающем бэкенде: в error.log будет что-то вроде `connect() failed (111: Connection refused)` к 127.0.0.1:3000.

---

## 4. Итог

| Проверка | Действие |
|----------|----------|
| Порт 3000 пустой | Запустить `python run.py` (или uvicorn + yarn start) и держать процесс запущенным |
| Порт 3000 занят | Смотреть логи приложения и `/var/log/nginx/error.log` |
| Nginx «запущен» | Ок, проблема не в самом Nginx, а в том, что на 3000 нечего проксировать или приложение падает |

После запуска `python run.py` (и пока он работает) сайт по вашему домену должен открываться.
