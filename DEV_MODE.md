# Режим разработки (dev) — живое обновление без static/bundle.js

Если вы хотите **постоянно работать в режиме разработки** (менять код и сразу видеть изменения, без сборки), используйте только dev-сервер. Тогда **папка `static` и файл `bundle.js` не участвуют** — они появляются только при продакшен-сборке.

---

## Как вы сейчас запускаете (рекомендуемый способ)

```bash
python run.py
```

- **Бэкенд:** порт 8001 (localhost).
- **Фронт:** dev-сервер на порту 3000 (`yarn start` / `npm run start`).

В этом режиме:

- React отдаётся **из памяти** dev-сервера, с hot reload.
- **Нет** папки `build/`, **нет** файлов `static/js/main.*.js` или `bundle.js` — ничего не мешает.
- Меняете код во фронте → сохраняете → страница обновляется сама. Для «живого» внедрения обновлений этого достаточно.

Открывайте сайт по адресу: **http://localhost:3000** (или http://IP-сервера:3000, если заходите по сети). Запросы к `/api` проксируются на бэкенд через `proxy` в `package.json`.

---

## Откуда тогда берётся \static\bundle.js?

В **Create React App (CRA)** при **продакшен-сборке** (`yarn build`) создаётся:

- `frontend/build/`
- внутри: `static/js/main.[hash].js` и `static/css/main.[hash].css`  
  (имя именно **main.***, а не `bundle.js`).

То есть путь вида **`/static/bundle.js`** в текущем проекте **не используется**. Он может появляться, если:

1. Где-то (Nginx, другой сервер) настроена раздача статики с путём `/static/bundle.js`.
2. Сохранена старая закладка или кэш страницы, которая тянет такой скрипт.
3. Раньше использовался другой сборщик (Webpack с именем `bundle.js`).

Чтобы **не мешало** при работе в dev:

- **Не используйте** продакшен-сборку для повседневной разработки: не запускайте `yarn build` и не отдавайте папку `build/` через веб-сервер, когда хотите «живые» правки.
- Для доступа к сайту в режиме разработки всегда заходите на **http://localhost:3000** (или ваш IP:3000), а не на URL, который отдаёт статику из `build/` или ищет `bundle.js`.

---

## Два режима — кратко

| Режим        | Команда              | Статика / bundle.js      | Обновления кода          |
|-------------|----------------------|---------------------------|---------------------------|
| **Разработка** | `python run.py`      | Не используется           | Сразу (hot reload)        |
| **Продакшен**  | `yarn build` + раздача `build/` | Есть `build/static/js/main.*.js` | Только после нового `yarn build` |

Для «дев-версии для обычного использования и живого внедрения» достаточно держать запущенным **только** `python run.py` и не трогать `build/` и `static/`.

---

## Если за фронтом стоит Nginx (или другой прокси)

Чтобы в dev-режиме не отдавать статику и не искать `bundle.js`, проксируйте запросы на **dev-сервер** (порт 3000), а не в папку с собранным фронтом:

```nginx
# Пример: весь трафик на фронт — на dev-сервер
location / {
    proxy_pass http://127.0.0.1:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
}
```

Тогда при заходе на ваш домен/IP будет использоваться dev-сервер (hot reload, без static/bundle.js). Продакшен-сборку (`build/`) и путь `/static/` в таком сценарии можно не использовать вообще, пока вы работаете в dev.
